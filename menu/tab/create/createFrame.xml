<Ui xmlns="http://www.blizzard.com/wow/ui/">
  <Script file="createFrame.lua"/>

  <!-- Create tab -->
  <Frame name="SMCreateFrame" mixin="SimpleMacroTabFrameMixin" hidden="false" parent="SimpleMacroFrame">
    <Anchors>
      <Anchor point="TOPLEFT"/>
      <Anchor point="BOTTOMRIGHT"/>
    </Anchors>
    <Layers>
      <Layer level="ARTWORK">
        <Texture name="$parentHorizontalBarLeft" file="Interface\ClassTrainerFrame\UI-ClassTrainer-HorizontalBar">
          <Size x="342" y="16"/>
          <Anchors>
            <Anchor point="TOPLEFT" x="2" y="-212"/>
          </Anchors>
          <TexCoords left="0" right="1.0" top="0" bottom="0.25"/>
        </Texture>
        <Texture file="Interface\ClassTrainerFrame\UI-ClassTrainer-HorizontalBar">
          <Size x="88" y="16"/>
          <Anchors>
            <Anchor point="LEFT" relativeTo="$parentHorizontalBarLeft" relativePoint="RIGHT" x="0" y="0"/>
          </Anchors>
          <TexCoords left="0" right="0.29296875" top="0.25" bottom="0.5"/>
        </Texture>
        <Texture name="$parentSelectedMacroBackground" file="Interface\Buttons\UI-EmptySlot">
          <Size x="64" y="64"/>
          <Anchors>
            <Anchor point="TOPLEFT" x="5" y="-218"/>
          </Anchors>
        </Texture>
        <FontString name="$parentSelectedMacroName" inherits="GameFontNormalLarge" justifyH="LEFT">
          <Size x="256" y="16"/>
          <Anchors>
            <Anchor point="TOPLEFT" relativeTo="$parentSelectedMacroBackground" relativePoint="TOPRIGHT" x="-4" y="-10"/>
          </Anchors>
        </FontString>
        <FontString name="$parentEnterMacroText" inherits="GameFontHighlightSmall" text="ENTER_MACRO_LABEL">
          <Anchors>
            <Anchor point="TOPLEFT" relativeTo="$parentSelectedMacroBackground" relativePoint="BOTTOMLEFT" x="8" y="3"/>
          </Anchors>
        </FontString>
        <FontString name="$parentCharLimitText" inherits="GameFontHighlightSmall">
          <Size x="0" y="10"/>
          <Anchors>
            <Anchor point="BOTTOM" x="-15" y="30"/>
          </Anchors>
        </FontString>
      </Layer>
    </Layers>
    <Frames>
      <Button name="$parentTab1" inherits="PanelTopTabButtonTemplate" id="1" text="SIMPLE_MACRO_STRING_ACCOUNT_MACROS">
        <Anchors>
          <Anchor point="TOPLEFT" x="51" y="-28"/>
        </Anchors>
        <Scripts>
          <OnClick>
            self:GetParent():SelectTab(self);
          </OnClick>
        </Scripts>
      </Button>
      <Button name="$parentTab2" inherits="PanelTopTabButtonTemplate" id="2" text="SIMPLE_MACRO_STRING_CHARACTER_MACROS">
        <Anchors>
          <Anchor point="LEFT" relativeTo="$parentTab1" relativePoint="RIGHT" x="-16" y="0"/>
        </Anchors>
        <Scripts>
          <OnClick>
            self:GetParent():SelectTab(self);
          </OnClick>
        </Scripts>
      </Button>
      <Frame parentKey="MacroSelector" inherits="ScrollBoxSelectorTemplate" frameStrata="HIGH">
        <KeyValues>
          <KeyValue key="buttonTemplate" value="SimpleMacroButtonTemplate" type="string"/>
        </KeyValues>
        <Size x="416" y="146"/>
        <Anchors>
          <Anchor point="TOPLEFT" x="12" y="-66"/>
        </Anchors>
      </Frame>
      <CheckButton parentKey="SelectedMacroButton" name="$parentSelectedMacroButton" frameStrata="HIGH" inherits="SimpleMacroButtonTemplate" id="0">
        <Anchors>
          <Anchor point="TOPLEFT" relativeTo="$parentSelectedMacroBackground" x="14" y="-14"/>
        </Anchors>
        <Scripts>
          <OnClick>
            self:SetChecked(false);
            PickupMacro(MacroFrame.selectedMacro);
          </OnClick>
        </Scripts>
      </CheckButton>
      <Button name="$parentChangeButton" inherits="UIPanelButtonTemplate" text="SIMPLE_MACRO_STRING_CHANGE">
        <Size x="172" y="22"/>
        <Anchors>
          <Anchor point="LEFT" relativeTo="$parentSelectedMacroButton" relativePoint="RIGHT" x="6" y="-8"/>
        </Anchors>
        <Scripts>
          <OnClick function="SMCreateFrame_ChangeButton_OnClick"/>
        </Scripts>
      </Button>
      <ScrollFrame name="$parentScrollFrame" inherits="UIPanelScrollFrameTemplate">
        <Size x="383" y="85"/>
        <Anchors>
          <Anchor point="TOPLEFT" relativeTo="$parentSelectedMacroBackground" relativePoint="BOTTOMLEFT" x="11" y="-13"/>
        </Anchors>
        <ScrollChild>
          <EditBox name="SMCreateFrameText" multiLine="true" letters="255" autoFocus="false" countInvisibleLetters="true">
            <Size x="383" y="85"/>
            <Scripts>
              <OnLoad>
                ScrollingEdit_OnCursorChanged(self, 0, 0, 0, 0);
              </OnLoad>
              <OnTextChanged>
                SMCreateFrame.textChanged = 1;
                --if ( MacroPopupFrame.mode == "new" ) then
                --  MacroPopupFrame:Hide();
                --end
                SMCreateFrameCharLimitText:SetFormattedText(MACROFRAME_CHAR_LIMIT, SMCreateFrameText:GetNumLetters());

                ScrollingEdit_OnTextChanged(self, self:GetParent());
              </OnTextChanged>
              <OnCursorChanged function="ScrollingEdit_OnCursorChanged"/>
              <OnUpdate>
                ScrollingEdit_OnUpdate(self, elapsed, self:GetParent());
              </OnUpdate>
              <OnEscapePressed function="EditBox_ClearFocus"/>
            </Scripts>
            <FontString inherits="GameFontHighlightSmall"/>
          </EditBox>
        </ScrollChild>
      </ScrollFrame>
      <Button name="$parentTextButton">
        <Size x="383" y="85"/>
        <Anchors>
          <Anchor point="TOPLEFT" relativeTo="$parentText"/>
        </Anchors>
        <Scripts>
          <OnClick>
            SMCreateFrameText:SetFocus();
          </OnClick>
        </Scripts>
      </Button>
      <Button name="$parentCancelButton" frameStrata="HIGH" inherits="UIPanelButtonTemplate" text="CANCEL">
        <Size x="80" y="22"/>
        <Anchors>
          <Anchor point="BOTTOMRIGHT" relativeTo="$parentScrollFrame" relativePoint="TOPRIGHT" x="25" y="10"/>
        </Anchors>
        <Scripts>
          <OnClick function="SMCreateFrame_CancelButton_OnClick"/>
        </Scripts>
      </Button>
      <Button name="$parentSaveButton" frameStrata="HIGH" inherits="UIPanelButtonTemplate" text="SAVE">
        <Size x="80" y="22"/>
        <Anchors>
          <Anchor point="BOTTOM" relativeTo="$parentCancelButton" relativePoint="TOP" x="0" y="15"/>
        </Anchors>
        <Scripts>
          <OnClick function="SMCreateFrame_SaveButton_OnClick"/>
        </Scripts>
      </Button>
      <Frame name="$parentTextBackground" inherits="TooltipBackdropTemplate">
        <Size x="419" y="95"/>
        <Anchors>
          <Anchor point="TOPLEFT" relativeTo="SMCreateFrame" x="6" y="-289"/>
        </Anchors>
      </Frame>
      <Button name="$parentDeleteButton" inherits="UIPanelButtonTemplate" text="SIMPLE_MACRO_STRING_DELETE">
        <Size x="86" y="22"/>
        <Anchors>
          <Anchor point="BOTTOMLEFT" relativePoint="BOTTOMLEFT" x="4" y="4"/>
        </Anchors>
        <Scripts>
          <OnClick>
            PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
            StaticPopup_Show("SIMPLE_MACRO_CONFIRM_DELETE_SELECTED_MACRO");
          </OnClick>
        </Scripts>
      </Button>
      <Button name="$parentNewButton" inherits="UIPanelButtonTemplate" text="SIMPLE_MACRO_STRING_NEW">
        <Size x="86" y="22"/>
        <Anchors>
          <Anchor point="BOTTOMRIGHT" x="-88" y="4"/>
        </Anchors>
        <Scripts>
          <OnClick function="SMCreateFrame_NewButton_OnClick"/>
        </Scripts>
      </Button>
    </Frames>
    <Scripts>
      <OnLoad method="OnLoad"/>
      <OnShow method="OnShow"/>
      <OnHide method="OnHide"/>
    </Scripts>
  </Frame>
</Ui>
